<!doctype html>
<html lang="en">
<head>
  <!-- ===========================
       META & TITLE
  ============================ -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FlowFate AI — Automation Dashboard</title>

  <!-- ===========================
       Tailwind CSS (CDN) + config
       - CDN is convenient for prototyping.
       - For production, compile Tailwind to reduce CSS size.
  ============================ -->
  <script>
    tailwind = window.tailwind || {}
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              50: '#f3fbf6',
              100: '#e9f9ef',
              300: '#6ee7b7',
              500: '#10b981',
              700: '#059669',
              900: '#0b4f36'
            }
          },
          boxShadow: {
            'soft-lg': '0 12px 30px rgba(2,6,23,0.08)',
            'glass': '0 8px 30px rgba(2,6,23,0.06)'
          },
          borderRadius: { xl2: '18px' }
        }
      }
    }
  </script>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Flowbite for components -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Lucide icons (optional) -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    /* --------------------------
       Micro-polish and utilities
       -------------------------- */
    :root { color-scheme: light; }
    body { font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    .card { border-radius: 14px; }
    .shadow-soft { box-shadow: 0 8px 30px rgba(2,6,23,0.06); }
    .glass { background: linear-gradient(180deg, rgba(255,255,255,0.86), rgba(255,255,255,0.82)); backdrop-filter: blur(6px); }
    .integration-logo { transition: transform .15s ease, box-shadow .15s ease; }
    .integration-logo:hover { transform: translateY(-4px); box-shadow: 0 8px 20px rgba(2,6,23,0.08); }
    .sr-only { position: absolute !important; width: 1px !important; height: 1px !important; padding: 0 !important; margin: -1px !important; overflow: hidden !important; clip: rect(0,0,0,0) !important; white-space: nowrap !important; border: 0 !important; }
  </style>
</head>

<body class="bg-gray-50 text-gray-800 antialiased">
  <!-- Skip to main content for accessibility -->
  <a href="#mainContent" class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:bg-white focus:text-brand-700 focus:px-4 focus:py-2 focus:rounded focus:shadow">Skip to main content</a>

  <!--
    Layout structure:
    - outer flex container: sidebar (fixed width on desktop) + main (flex-1)
    - mobile drawer is separate and overlays when open
    This prevents the sidebar from covering main content on desktop.
  -->
  <div class="min-h-screen flex">

    <!-- =========================
         DESKTOP SIDEBAR (always visible like Notion)
         - hidden on small screens (md:hidden)
    ========================== -->
    <aside id="sidebarDesktop" class="hidden md:flex md:flex-col w-72 bg-white border-r border-gray-100">
      <!-- header -->
      <div class="p-5 border-b">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-brand-700 to-brand-500 grid place-items-center text-white font-extrabold">AI</div>
          <div>
            <div class="text-lg font-semibold">FlowFate AI</div>
            <div class="text-xs text-gray-400">Automation Platform</div>
          </div>
        </div>
      </div>

      <!-- nav -->
      <nav class="p-4 space-y-1 flex-1">
        <a class="flex items-center gap-3 p-2 rounded-lg hover:bg-green-50 transition" href="#">
          <svg class="w-5 h-5 text-green-600" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 12h18" stroke-width="1.5"></path></svg>
          <span class="font-medium">Overview</span>
        </a>

        <a class="flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 transition" href="#">
          <svg class="w-5 h-5 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M9 17v-6a3 3 0 016 0v6" stroke-width="1.5"></path></svg>
          <span>Automations</span>
        </a>

        <a class="flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 transition" href="#">
          <svg class="w-5 h-5 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 7h18M3 12h18M3 17h18" stroke-width="1.5"></path></svg>
          <span>Executions</span>
        </a>

        <a class="flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 transition" href="#">
          <svg class="w-5 h-5 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M4 6h16M4 12h16M4 18h16" stroke-width="1.5"></path></svg>
          <span>Integrations</span>
        </a>

        <a class="flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 transition" href="#">
          <svg class="w-5 h-5 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 2l4 4-4 4-4-4 4-4z" stroke-width="1.5"></path></svg>
          <span>Settings</span>
        </a>
      </nav>

      <!-- workspace -->
      <div class="p-4 border-t">
        <div class="text-xs text-gray-500">Workspace</div>
        <div class="mt-3 flex items-center gap-3">
          <div class="w-9 h-9 rounded-lg bg-gradient-to-br from-brand-500 to-brand-700 grid place-items-center text-white font-bold">A</div>
          <div>
            <div class="text-sm font-medium">Acme Corp</div>
            <div class="text-xs text-gray-400">Team workspace</div>
          </div>
        </div>
      </div>
    </aside>

    <!-- =========================
         MOBILE SIDEBAR (slide-in)
    ========================== -->
    <div id="mobileDrawer" class="fixed inset-0 z-50 hidden">
      <div id="drawerBackdrop" class="absolute inset-0 bg-black/40"></div>
      <div class="absolute left-0 top-0 w-72 h-full bg-white shadow p-4">
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center gap-3">
            <div class="w-9 h-9 rounded grid place-items-center bg-brand-700 text-white font-bold">AI</div>
            <div>
              <div class="font-semibold">FlowFate AI</div>
              <div class="text-xs text-gray-400">Automation</div>
            </div>
          </div>
          <button id="closeDrawer" class="p-2 rounded hover:bg-gray-100">
            <svg class="w-5 h-5 text-gray-700" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="1.8" d="M6 18L18 6M6 6l12 12"/></svg>
          </button>
        </div>

        <nav class="space-y-2">
          <a class="block p-2 rounded hover:bg-gray-50" href="#">Overview</a>
          <a class="block p-2 rounded hover:bg-gray-50" href="#">Automations</a>
          <a class="block p-2 rounded hover:bg-gray-50" href="#">Integrations</a>
          <a class="block p-2 rounded hover:bg-gray-50" href="#">Analytics</a>
          <a class="block p-2 rounded hover:bg-gray-50" href="#">Settings</a>
        </nav>
      </div>
    </div>

    <!-- =========================
         MAIN AREA (flex-1 so sidebar doesn't overlap)
    ========================== -->
  <main id="mainContent" class="flex-1 min-h-screen flex flex-col" tabindex="-1">

      <!-- NAVBAR (floating feel using glass style) -->
      <header class="sticky top-0 z-30 bg-white/90 backdrop-blur border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="flex items-center justify-between h-16">
            <div class="flex items-center gap-4">
              <!-- mobile toggle -->
              <button id="openDrawer" class="md:hidden p-2 rounded hover:bg-gray-100">
                <svg class="w-6 h-6 text-gray-700" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
              </button>
              <div>
                <div class="text-lg font-semibold">Dashboard</div>
                <div class="text-xs text-gray-400">AI Workflow Automation</div>
              </div>
            </div>

            <div class="flex items-center gap-3">
              <!-- Global Search -->
              <div class="hidden md:block">
                <form role="search" aria-label="Global automations search" class="relative w-full max-w-xs">
                  <label for="globalSearch" class="sr-only">Search automations</label>
                  <span class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 3a7.5 7.5 0 006.15 13.65z" />
                    </svg>
                  </span>
                  <input
                    id="globalSearch"
                    type="text"
                    placeholder="Search automations..."
                    class="w-full rounded-lg border border-gray-300 pl-10 pr-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"
                    autocomplete="off"
                  />
                </form>
              </div>

              <button id="notificationsBtn" class="p-2 rounded hover:bg-gray-100"><svg class="w-5 h-5 text-gray-600" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="1.6" d="M15 17h5l-1.405-1.405"/></svg></button>

              <div class="flex items-center gap-2 border-l border-gray-100 pl-3 ml-1">
                <div class="text-right hidden sm:block">
                  <div class="text-sm font-medium">Totok Michael</div>
                  <div class="text-xs text-gray-400">tmichael20@mail.com</div>
                </div>
                <button id="profileBtn" class="w-10 h-10 rounded-full overflow-hidden ring-1 ring-gray-100">
                  <img src="https://i.pravatar.cc/80?img=5" alt="avatar" class="w-full h-full object-cover" />
                </button>
              </div>
            </div>
          </div>
        </div>
      </header>

      <!-- CONTENT -->
      <div class="flex-1 overflow-y-auto py-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

          <!-- TOP STATS -->
          <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
            <!-- Total Automations -->
            <div class="card bg-white p-5 shadow-soft hover:shadow-lg transition">
              <div class="flex items-start justify-between">
                <div>
                  <p class="text-sm text-gray-500">Total Automations</p>
                  <h2 id="totalAutomations" class="text-3xl font-bold mt-2">124</h2>
                  <p class="text-xs text-gray-400 mt-2">Automations defined across workspace</p>
                </div>
                <div class="text-right">
                  <div class="text-sm text-gray-500">Change</div>
                  <div class="mt-2 inline-block px-3 py-1 bg-green-50 text-green-700 rounded-full text-sm">+12%</div>
                </div>
              </div>
            </div>

            <!-- Running -->
            <div class="card bg-white p-5 shadow-soft hover:shadow-lg transition">
              <p class="text-sm text-gray-500">Running</p>
              <h2 id="runningAutomations" class="text-3xl font-bold text-green-600 mt-2">98</h2>
              <p class="text-xs text-gray-400 mt-2">Automations currently executing</p>
            </div>

            <!-- Paused -->
            <div class="card bg-white p-5 shadow-soft hover:shadow-lg transition">
              <p class="text-sm text-gray-500">Paused</p>
              <h2 id="pausedAutomations" class="text-3xl font-bold text-amber-600 mt-2">15</h2>
              <p class="text-xs text-gray-400 mt-2">Manually paused or scheduled</p>
            </div>

            <!-- Failed -->
            <div class="card bg-white p-5 shadow-soft hover:shadow-lg transition">
              <p class="text-sm text-gray-500">Failed</p>
              <h2 id="failedAutomations" class="text-3xl font-bold text-red-600 mt-2">11</h2>
              <p class="text-xs text-gray-400 mt-2">Needs attention</p>
            </div>
          </section>

          <!-- INTEGRATIONS + MAIN CHART -->
          <section class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
            <!-- Integrations -->
            <aside class="card bg-white p-5 shadow-soft">
              <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold">Connected Integrations</h3>
                <button id="manageIntegrations" class="text-sm text-gray-500 hover:text-gray-700">Manage</button>
              </div>

              <div class="flex flex-wrap gap-4">
                <!-- Slack -->
                <a href="#" class="flex flex-col items-center justify-center w-24 h-24 p-3 rounded-xl bg-gray-50 integration-logo" title="Slack">
                  <img src="https://cdn-icons-png.flaticon.com/512/2111/2111615.png" alt="Slack" class="w-10 h-10" />
                  <span class="text-[11px] mt-2 font-medium">Slack</span>
                </a>
                <!-- Notion -->
                <a href="#" class="flex flex-col items-center justify-center w-24 h-24 p-3 rounded-xl bg-gray-50 integration-logo" title="Notion">
                  <img src="https://upload.wikimedia.org/wikipedia/commons/e/e9/Notion-logo.svg" alt="Notion" class="w-10 h-10" />
                  <span class="text-[11px] mt-2 font-medium">Notion</span>
                </a>
                <!-- ClickUp -->
                <a href="#" class="flex flex-col items-center justify-center w-24 h-24 p-3 rounded-xl bg-gray-50 integration-logo" title="ClickUp">
                  <img src="https://cdn-icons-png.flaticon.com/512/5968/5968812.png" alt="ClickUp" class="w-10 h-10" />
                  <span class="text-[11px] mt-2 font-medium">ClickUp</span>
                </a>
                <!-- Google Drive -->
                <a href="#" class="flex flex-col items-center justify-center w-24 h-24 p-3 rounded-xl bg-gray-50 integration-logo" title="Drive">
                  <img src="https://cdn-icons-png.flaticon.com/512/2965/2965306.png" alt="Drive" class="w-10 h-10" />
                  <span class="text-[11px] mt-2 font-medium">Drive</span>
                </a>
                <!-- Gmail -->
                <a href="#" class="flex flex-col items-center justify-center w-24 h-24 p-3 rounded-xl bg-gray-50 integration-logo" title="Gmail">
                  <img src="https://cdn-icons-png.flaticon.com/512/281/281769.png" alt="Gmail" class="w-10 h-10" />
                  <span class="text-[11px] mt-2 font-medium">Gmail</span>
                </a>
                <!-- Webhooks -->
                <a href="#" class="flex flex-col items-center justify-center w-24 h-24 p-3 rounded-xl bg-gray-50 integration-logo" title="Webhooks">
                  <svg class="w-10 h-10 text-gray-600" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="1.5" d="M12 2v4M12 18v4M4 12h4M16 12h4"/></svg>
                  <span class="text-[11px] mt-2 font-medium">Webhooks</span>
                </a>
              </div>

              <div class="mt-4 text-xs text-gray-500">Click a logo to open logs & configuration (demo).</div>
            </aside>

            <!-- Chart -->
            <article class="lg:col-span-2 card bg-white p-5 shadow-soft">
              <div class="flex items-center justify-between">
                <div>
                  <h3 class="text-lg font-semibold">Automation Runs — Monthly</h3>
                  <p class="text-sm text-gray-500">Total workflow executions for the client per month</p>
                </div>

                <div class="flex items-center gap-2">
                  <select id="periodSelect" class="text-sm border rounded px-2 py-1">
                    <option value="6">Last 6 months</option>
                    <option value="12" selected>Last 12 months</option>
                    <option value="24">Last 24 months</option>
                  </select>
                  <button id="exportChartBtn" class="text-sm px-3 py-1 border rounded hover:bg-gray-50">Export</button>
                </div>
              </div>

              <div class="mt-4">
                <canvas id="automationRunsChart" height="160"></canvas>
              </div>

              <div class="mt-3 flex items-center gap-4 text-sm text-gray-500">
                <div class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-green-500"></span> Runs</div>
                <div class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-gray-300"></span> Avg duration</div>
              </div>
            </article>
          </section>

          <!-- REMINDERS & TIME TRACKER -->
          <section class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- Reminders -->
            <div class="card bg-white p-5 shadow-soft">
              <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold">Reminders</h3>
                <span class="text-xs text-gray-400">Today</span>
              </div>

              <ul class="mt-4 space-y-3">
                <li class="flex items-center justify-between">
                  <div>
                    <div class="font-medium">Update Slack bot workflow</div>
                    <div class="text-xs text-gray-400">Check event mapping</div>
                  </div>
                  <div class="text-sm text-gray-500">Today • 11:00</div>
                </li>

                <li class="flex items-center justify-between">
                  <div>
                    <div class="font-medium">Review Notion integration logs</div>
                    <div class="text-xs text-gray-400">Look for sync errors</div>
                  </div>
                  <div class="text-sm text-gray-500">Tomorrow • 09:00</div>
                </li>

                <li class="flex items-center justify-between">
                  <div>
                    <div class="font-medium">Test ClickUp task sync</div>
                    <div class="text-xs text-gray-400">Simulate a task creation</div>
                  </div>
                  <div class="text-sm text-gray-500">Next Week</div>
                </li>
              </ul>

              <div class="mt-4 flex gap-2">
                <button id="snoozeBtn" class="px-3 py-2 bg-gray-50 rounded hover:bg-gray-100">Snooze</button>
                <button id="viewAllRemBtn" class="px-3 py-2 bg-brand-700 text-white rounded hover:brightness-95">View all</button>
              </div>
            </div>

            <!-- Time Tracker -->
            <div class="card bg-white p-5 shadow-soft flex flex-col items-center">
              <div class="w-full flex items-center justify-between">
                <h3 class="text-lg font-semibold">Time Tracker</h3>
                <div class="text-xs text-gray-400">Focus mode</div>
              </div>

              <div class="mt-4 relative">
                <svg width="160" height="160" viewBox="0 0 160 160">
                  <circle cx="80" cy="80" r="68" stroke="#eef2f6" stroke-width="10" fill="none" />
                  <circle id="timerProgress" cx="80" cy="80" r="68" stroke="#10b981" stroke-width="10" fill="none" stroke-linecap="round" transform="rotate(-90 80 80)" stroke-dasharray="427" stroke-dashoffset="427"/>
                </svg>

                <div class="absolute inset-0 flex flex-col items-center justify-center">
                  <div id="timeDisplay" class="text-3xl font-mono font-bold">00:00:00</div>
                  <div class="text-xs text-gray-400 mt-1">Tracked time today</div>
                </div>
              </div>

              <div class="mt-4 flex gap-3 w-full">
                <button id="startPauseBtn" class="flex-1 px-4 py-2 rounded-lg bg-brand-700 text-white flex items-center justify-center gap-2 hover:brightness-95">
                  <svg id="startIcon" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M5 3v18l15-9L5 3z" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  <span id="startPauseLabel" class="text-sm font-medium">Start</span>
                </button>
                <button id="resetTimerBtn" class="px-4 py-2 rounded-lg border border-gray-200 text-sm">Reset</button>
              </div>

              <div id="trackerStatus" class="mt-3 text-xs text-gray-500">No active session</div>
            </div>
          </section>

          <!-- FOOTER -->
          <footer class="mt-8 text-center text-xs text-gray-400">
            © <span id="year"></span> FlowFate AI — Built for automation teams
          </footer>

        </div>
      </div>
    </main>
  </div>

  <!-- =========================
       SCRIPTS: icons, chart, timer, interactions
       ========================== -->
  <script>
    // lucide icons if available
    if (typeof lucide !== 'undefined') lucide.createIcons();

    // Set year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Mobile drawer toggles
    const openDrawer = document.getElementById('openDrawer');
    const closeDrawer = document.getElementById('closeDrawer');
    const mobileDrawer = document.getElementById('mobileDrawer');
    const drawerBackdrop = document.getElementById('drawerBackdrop');

    openDrawer && openDrawer.addEventListener('click', () => {
      mobileDrawer.classList.remove('hidden');
    });
    closeDrawer && closeDrawer.addEventListener('click', () => {
      mobileDrawer.classList.add('hidden');
    });
    drawerBackdrop && drawerBackdrop.addEventListener('click', () => {
      mobileDrawer.classList.add('hidden');
    });

    // Clickable integration cards demo
    document.querySelectorAll('.integration-logo').forEach(node => {
      node.addEventListener('click', () => {
        const label = node.querySelector('span')?.innerText || 'Integration';
        alert('Open integration: ' + label + ' (demo)');
      });
    });

    // Chart: monthly automation runs
    const ctx = document.getElementById('automationRunsChart').getContext('2d');
    const gradient = ctx.createLinearGradient(0, 0, 0, 400);
    gradient.addColorStop(0, 'rgba(16,185,129,0.12)');
    gradient.addColorStop(1, 'rgba(16,185,129,0.02)');

    const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
    const sampleData = [420, 560, 700, 820, 940, 1100, 1270, 1300, 1150, 980, 860, 1020];

    const automationChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: months,
        datasets: [{
          label: 'Automation Runs',
          data: sampleData,
          backgroundColor: gradient,
          borderColor: '#10b981',
          pointBackgroundColor: '#ffffff',
          pointBorderColor: '#10b981',
          tension: 0.35,
          fill: true,
          pointRadius: 4
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: { legend: { display: false } },
        scales: {
          x: { grid: { display: false }, ticks: { color: '#6b7280' } },
          y: { beginAtZero: true, ticks: { color: '#6b7280' }, grid: { color: '#f3f4f6' } }
        }
      }
    });

    // Export chart image demo
    document.getElementById('exportChartBtn').addEventListener('click', () => {
      const url = automationChart.toBase64Image();
      const w = window.open('');
      w.document.write('<img src="' + url + '" style="max-width:100%;">');
    });

    // Chart period selector (simulate data)
    document.getElementById('periodSelect').addEventListener('change', (e) => {
      const val = parseInt(e.target.value, 10);
      const nowIdx = new Date().getMonth();
      const newLabels = [];
      const newData = [];
      for (let i = val - 1; i >= 0; i--) {
        const idx = (nowIdx - i + 12) % 12;
        newLabels.push(months[idx]);
        // generate simulated number (for demo)
        const base = 700 + Math.round(Math.sin(idx / 2) * 200) + Math.round(Math.random() * 120);
        newData.push(base);
      }
      automationChart.data.labels = newLabels;
      automationChart.data.datasets[0].data = newData;
      automationChart.update();
    });

    // Animated counters for top stats
    function animateCounter(elId, target, duration = 800) {
      const el = document.getElementById(elId);
      if (!el) return;
      const start = +el.textContent || 0;
      const diff = target - start;
      const startTime = performance.now();
      function frame(now) {
        const t = Math.min((now - startTime) / duration, 1);
        el.textContent = Math.floor(start + diff * t);
        if (t < 1) requestAnimationFrame(frame);
      }
      requestAnimationFrame(frame);
    }
    animateCounter('totalAutomations', 124);
    animateCounter('runningAutomations', 98);
    animateCounter('pausedAutomations', 15);
    animateCounter('failedAutomations', 11);

    // -------------------------
    // Time tracker logic
    // -------------------------
    const timerProgress = document.getElementById('timerProgress');
    const timeDisplay = document.getElementById('timeDisplay');
    const startPauseBtn = document.getElementById('startPauseBtn');
    const startPauseLabel = document.getElementById('startPauseLabel');
    const startIcon = document.getElementById('startIcon');
    const resetTimerBtn = document.getElementById('resetTimerBtn');
    const trackerStatus = document.getElementById('trackerStatus');

    let timerInterval = null;
    let elapsedSeconds = 0;
    const circleLength = 2 * Math.PI * 68; // circumference for r=68

    function formatHMS(sec) {
      const h = String(Math.floor(sec / 3600)).padStart(2, '0');
      const m = String(Math.floor((sec % 3600) / 60)).padStart(2, '0');
      const s = String(sec % 60).padStart(2, '0');
      return `${h}:${m}:${s}`;
    }

    function updateTimerUI() {
      timeDisplay.textContent = formatHMS(elapsedSeconds);
      // Progress relative to 1 hour for demo
      const prog = Math.min(elapsedSeconds / 3600, 1);
      const offset = circleLength - (circleLength * prog);
      timerProgress.style.strokeDasharray = circleLength;
      timerProgress.style.strokeDashoffset = offset;
    }

    startPauseBtn.addEventListener('click', () => {
      if (!timerInterval) {
        // start
        trackerStatus.textContent = 'Running';
        startPauseLabel.textContent = 'Pause';
        startIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"></path>';
        timerInterval = setInterval(() => {
          elapsedSeconds++;
          updateTimerUI();
        }, 1000);
      } else {
        // pause
        clearInterval(timerInterval);
        timerInterval = null;
        trackerStatus.textContent = 'Paused';
        startPauseLabel.textContent = 'Resume';
        startIcon.innerHTML = '<path d="M5 3v18l15-9L5 3z" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path>';
      }
    });

    resetTimerBtn.addEventListener('click', () => {
      clearInterval(timerInterval);
      timerInterval = null;
      elapsedSeconds = 0;
      updateTimerUI();
      trackerStatus.textContent = 'Reset';
      startPauseLabel.textContent = 'Start';
      startIcon.innerHTML = '<path d="M5 3v18l15-9L5 3z" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path>';
    });

    // init timer UI
    updateTimerUI();

    // Live filter for integrations using globalSearch
    const globalSearchInput = document.getElementById('globalSearch');
    const integrationCards = Array.from(document.querySelectorAll('.integration-logo'));
    const integrationContainer = integrationCards.length ? integrationCards[0].parentElement : null;
    let noResultsEl = null;
    function ensureNoResultsEl() {
      if (!integrationContainer) return;
      if (!noResultsEl) {
        noResultsEl = document.createElement('div');
        noResultsEl.className = 'col-span-full text-center text-sm text-gray-400 py-6';
        noResultsEl.textContent = 'No integrations match your search.';
        noResultsEl.hidden = true;
        integrationContainer.appendChild(noResultsEl);
      }
    }
    ensureNoResultsEl();
    function filterIntegrations(query) {
      if (!integrationCards.length) return;
      const q = query.trim().toLowerCase();
      let visible = 0;
      integrationCards.forEach(card => {
        const label = (card.querySelector('span')?.innerText || '').toLowerCase();
        const match = !q || label.includes(q);
        card.style.display = match ? '' : 'none';
        if (match) visible++;
      });
      if (noResultsEl) noResultsEl.hidden = visible !== 0;
    }
    let searchDebounce;
    globalSearchInput && globalSearchInput.addEventListener('input', e => {
      clearTimeout(searchDebounce);
      searchDebounce = setTimeout(() => filterIntegrations(e.target.value), 120);
    });

    // Keyboard shortcut: Ctrl/Cmd+K focuses search
    document.addEventListener('keydown', (e) => {
      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'k') {
        e.preventDefault();
        globalSearchInput?.focus();
      }
    });

    // Small UX buttons (demo)
    document.getElementById('manageIntegrations').addEventListener('click', () => alert('Open Integrations Manager (demo)'));
    document.getElementById('snoozeBtn').addEventListener('click', () => alert('Snoozed reminders (demo)'));
    document.getElementById('viewAllRemBtn').addEventListener('click', () => alert('Open Reminders (demo)'));

    // Accessibility: close drawer with escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') mobileDrawer.classList.add('hidden');
    });

    // Live region for a11y announcements (simple)
    function announce(msg) {
      let live = document.getElementById('liveRegion');
      if (!live) {
        live = document.createElement('div');
        live.id = 'liveRegion';
        live.className = 'sr-only';
        live.setAttribute('aria-live', 'polite');
        live.setAttribute('role', 'status');
        document.body.appendChild(live);
      }
      live.textContent = msg;
    }

    // Announce timer start/pause
    startPauseBtn.addEventListener('click', () => {
      if (timerInterval) announce('Timer started.');
      else announce('Timer paused.');
    });

    // Navigate to user profile page when profile avatar is clicked
    const profileBtn = document.getElementById('profileBtn');
    if (profileBtn) {
      profileBtn.addEventListener('click', () => {
        window.location.href = 'userProfile.html';
      });
    }

  </script>
</body>
</html>